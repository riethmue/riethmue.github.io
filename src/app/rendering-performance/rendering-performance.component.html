<div class="perf-overlay">
  @if (stats$ | async; as stats) {
  <div class="perf-header">⚡ RENDER STATS</div>
  <div class="perf-content">
    <div class="stat-row">
      <span class="stat-label">FPS</span>
      <span class="stat-bar">
        <span
          class="bar"
          [class.fps-high]="stats.fps >= 50"
          [class.fps-mid]="stats.fps >= 30 && stats.fps < 50"
          [class.fps-low]="stats.fps < 30"
          >{{ getBar(stats.fps, 60) }}</span
        >
      </span>
      <span
        class="stat-value"
        [class.fps-high]="stats.fps >= 50"
        [class.fps-mid]="stats.fps >= 30 && stats.fps < 50"
        [class.fps-low]="stats.fps < 30"
        >{{ stats.fps }}</span
      >
    </div>
    <div class="stat-row">
      <span class="stat-label">Calls</span>
      <span class="stat-bar">
        <span class="bar">{{ getBar(stats.calls, 100) }}</span>
      </span>
      <span class="stat-value">{{ stats.calls }}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Tris</span>
      <span class="stat-bar">
        <span class="bar">{{ getBar(stats.tris / 1000, 10) }}</span>
      </span>
      <span class="stat-value">{{ formatNumber(stats.tris) }}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Geos</span>
      <span class="stat-bar">
        <span class="bar">{{ getBar(stats.geos, 50) }}</span>
      </span>
      <span class="stat-value">{{ stats.geos }}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Texs</span>
      <span class="stat-bar">
        <span class="bar">{{ getBar(stats.texs, 20) }}</span>
      </span>
      <span class="stat-value">{{ stats.texs }}</span>
    </div>
  </div>
  <div class="perf-header" style="margin-top: 8px">⚙️ SETTINGS</div>
  <div class="perf-content">
    <div class="stat-row">
      <span class="stat-label">PixelR</span>
      <span class="stat-value" style="grid-column: 2 / 4;">{{ stats.pixelRatio?.toFixed(1) || 'N/A' }}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">AA</span>
      <span class="stat-value" style="grid-column: 2 / 4;">{{ stats.antialias ? 'ON' : 'OFF' }}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Mode</span>
      <span class="stat-value" style="grid-column: 2 / 4;">{{ stats.isMobile ? 'MOBILE' : 'DESKTOP' }}</span>
    </div>
  </div>
  }
</div>
